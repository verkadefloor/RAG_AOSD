<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speeddate with Furniture</title>

    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/navbar.css">
    <link rel="stylesheet" href="css/chat.css"> 

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>

<body class="speeddate">

<div class="speeddate-interface">
    <div class="top-layer">
      <div class="top-left-controls">
          <button id="back-btn" class="nav-btn exit-btn">Exit experience</button>
          <button id="next-btn" class="nav-btn next-btn">Next Date</button>
      </div>
      
      <div class="timer-container">
          <div id="timer-display" class="timer">04:00</div>
          <div id="date-counter" class="date-counter">Date 1 / 3</div>
      </div>

      <div class="top-right-controls">
          <button id="music-btn" class="settings-icon-btn">
              <span class="material-symbols-outlined">music_note</span>
          </button>

          <button id="settings-btn" class="settings-icon-btn">
              <span class="material-symbols-outlined">settings</span>
          </button>
      </div>
    </div>

    <div class="stage-layer">
        <div class="scene-card">
            
            <div class="furniture-spotlight">
                <h2 id="furniture-name" class="furniture-name-tag">Loading...</h2>
                <div class="image-frame" id="image-stack-container">
                    <img id="img-normal" class="img-layer" alt="Furniture Normal">
                    <img id="img-revealed" class="img-layer revealed-state" alt="Furniture Revealed">
                </div>
                <div class="furniture-details">
                    <div class="detail-row">
                        <span class="status-dot"></span>
                        <span class="status-text">Now on display in Rijksmuseum</span>
                    </div>
                    <div class="detail-row">
                        <a id="furniture-url" href="#" target="_blank" class="furniture-link">
                            View on Rijksmuseum.nl
                        </a>
                    </div>
                </div>
            </div>

            <div class="chat-wrapper">
                <div class="chat-box speech-bubble">
                    <div id="chat-box" class="chat-scroll-view"></div>
                </div>
            </div>

            <button class="corner-warning-btn" aria-label="Report or Warning">
                <span class="material-symbols-outlined">warning</span>
            </button>
        </div>
    </div>

    <div class="interaction-layer">
        
        <div id="suggestions-container" class="suggestions-wrapper">
            </div>

        <div id="text-input-container" class="input-controls">
            <input type="text" id="user-input" class="chat-input-field" placeholder="Ask anything..." autocomplete="off">
            <button id="send-btn" class="chat-btn send-icon-btn">
                <span class="material-symbols-outlined">send</span>
            </button>
        </div>

    </div>
</div>

<div id="settings-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Filter Preferences</h3>
            <button id="close-settings" class="close-btn">&times;</button>
        </div>
        <div class="modal-body">
            <div class="setting-item">
                <label for="modal-period">Time Period</label>
                <select id="modal-period" class="modal-select">
                    <option value="all">All Periods</option>
                    <option value="15th century">15th century</option>
                    <option value="17th century">17th century</option>
                    <option value="18th century">18th century</option>
                    <option value="19th century">19th century</option>
                    <option value="20th century">20th century</option>
                </select>
            </div>
            <div class="setting-item">
                <label for="modal-rounds">Number of Dates</label>
                <select id="modal-rounds" class="modal-select">
                    <option value="1">1 Date</option>
                    <option value="2">2 Dates</option>
                    <option value="3">3 Dates</option>
                    <option value="4">4 Dates</option>
                    <option value="5">5 Dates</option>
                </select>
            </div>
        </div>
        <div class="modal-footer">
            <button id="save-settings" class="nav-btn next-btn">Apply & Restart</button>
        </div>
    </div>
</div>

<div id="confirmation-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="confirm-title">Confirmation</h3>
            <button id="close-confirm" class="close-btn">&times;</button>
        </div>
        <div class="modal-body">
            <p id="confirm-message" style="margin-bottom: 20px; color: #444; font-size: 1rem;">Are you sure?</p>
        </div>
        <div class="modal-footer" style="display: flex; gap: 10px; justify-content: center;">
            <button id="confirm-cancel-btn" class="nav-btn" style="background-color: #999;">No, Return</button>
            <button id="confirm-yes-btn" class="nav-btn next-btn">Yes, Proceed</button>
        </div>
    </div>
</div>

<div id="times-up-modal" class="modal-overlay hidden">
    <div class="modal-content times-up-content">
        <div class="modal-header">
            <h3>Time's Up!</h3>
        </div>
        <div class="modal-body">
            <p class="highlight-text">Fancy a "second date" in real life?</p>
            <p class="small-text">Leave your email to receive viewing information.</p>
            <div class="email-signup-wrapper">
                <form id="times-up-form">
                    <input type="email" id="times-up-email" placeholder="Your email address" required class="modal-input">
                    <button type="submit" class="modal-submit-btn">Notify Me</button>
                </form>
                <div id="times-up-success" class="hidden">
                    <span style="color: #7da076; font-weight: bold;">Saved! We'll be in touch.</span>
                </div>
            </div>
        </div>
        <div class="modal-footer column-layout">
            <button id="modal-next-round-btn" class="nav-btn next-btn full-width">Start Next Speeddate</button>
            <a href="/" id="modal-exit-link" class="text-link">No thanks, exit experience</a>
        </div>
    </div>
</div>

<div id="context-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Historical Context</h3>
            <button id="close-context-x" class="close-btn">&times;</button>
        </div>
        <div class="modal-body">
            <p style="line-height: 1.6; color: #555; font-size: 0.95rem;">
                The objects featured here are authentic historical artifacts. Please view them with historical awareness.
            </p>
        </div>
        <div class="modal-footer" style="text-align: center;">
            <button id="close-context-btn" class="nav-btn next-btn">Understood</button>
        </div>
    </div>
</div>

<audio id="bg-music" loop autoplay>
    <source src="audio/music.mp3" type="audio/mpeg">
</audio>

<script src="js/chat.js"></script>
</body>
</html>